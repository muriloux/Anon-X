(()=>{"use strict";function e(e){const t=localStorage.getItem(e);return t?JSON.parse(t):[]}let t=!1;const n=document.getElementById("addCoordInput"),o=document.getElementById("coordsList"),c=document.getElementById("chevronIcon");function d(e){chrome.tabs.query({active:!0,currentWindow:!0},(t=>{if(t&&t[0]&&t[0].url){const n=new URL(t[0].url);e(n)}}))}function r(){const t=n.value;d((n=>{const o=n.hash.replace(/#\w+,/i,"");!function(t,n){const o=e(t);o.push(n),localStorage.setItem(t,JSON.stringify(o))}("coords",{[t||o]:o}),s()})),n.value=""}function l(t){const n=e("coords").filter((e=>Object.keys(e)[0]!==t));var o,c;o="coords",c=n,localStorage.setItem(o,JSON.stringify(c)),s()}function s(){const t=e("coords");d((e=>{const n=e.hash,c=e.href,d=n.replace(/,-?\d+/g,"");o.innerHTML="",t.forEach((e=>{const t=Object.keys(e)[0],r=`${d},${e[t]}`,s=c.replace(n,r),a=document.createElement("li"),i=document.createElement("a"),u=document.createElement("button");a.className="coordsListItem",i.innerText=t,i.href=s,u.innerText="✕",u.className="deleteButton",a.addEventListener("click",(e=>{e.preventDefault(),chrome.tabs.update({url:s})})),u.addEventListener("click",(()=>{l(t)})),a.appendChild(i),a.appendChild(u),null==o||o.appendChild(a)}))}))}function a(e){e&&t||(t?(o.style.display="none",c.textContent="▼"):(o.style.display="block",s(),c.textContent="▲"),t=!t)}const i=document.getElementById("addCoordButton"),u=document.getElementById("addCoordInput"),m=document.getElementById("toggleCoordsButton");null==i||i.addEventListener("click",(()=>{r(),a(!0)})),u.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),r(),a(!0))})),m.addEventListener("click",(()=>a()))})();