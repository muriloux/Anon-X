(()=>{"use strict";function e(e){const t=localStorage.getItem(e);return t?JSON.parse(t):[]}let t=!1;const n=document.getElementById("addCoordInput"),o=document.getElementById("coordsList"),c=document.getElementById("chevronIcon");function d(e){chrome.tabs.query({active:!0,currentWindow:!0},(t=>{if(t&&t[0]&&t[0].url){const n=new URL(t[0].url);e(n)}}))}function r(){const t=n.value;d((n=>{const o=n.hash.replace(/#\w+,/i,"");!function(t,n){const o=e(t);o.push(n),localStorage.setItem(t,JSON.stringify(o))}("coords",{[t||o]:o}),l()})),n.value=""}function l(){const t=e("coords");d((e=>{const n=e.hash,c=e.href,d=n.replace(/,(\d+,\d+)/,"");o.innerHTML="",t.forEach((e=>{const t=Object.keys(e)[0],r=`${d},${e[t]}`,l=c.replace(n,r),s=document.createElement("li"),a=document.createElement("a");a.innerText=t,a.href=l,a.addEventListener("click",(e=>{e.preventDefault(),chrome.tabs.update({url:l})})),s.appendChild(a),null==o||o.appendChild(s)}))}))}function s(e){e&&t||(t?(o.style.display="none",c.textContent="▼"):(o.style.display="block",l(),c.textContent="▲"),t=!t)}const a=document.getElementById("addCoordButton"),u=document.getElementById("addCoordInput"),i=document.getElementById("toggleCoordsButton");null==a||a.addEventListener("click",(()=>{r(),s(!0)})),u.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),r(),s(!0))})),i.addEventListener("click",(()=>s()))})();